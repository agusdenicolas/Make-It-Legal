<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
    <head th:replace="baseLayout">
    </head>
    <body>
        <nav th:replace="components/navbar :: navbar"></nav>
        <div class="container">
            <h2 class="mb-5">Formulario para Nuevo Contrato</h2>
            <form action="#" th:action="@{/usuario/contratos/nuevo}" th:object="${nuevoContrato}" th:method="POST">
                <div class="row">
                    <div class="col">
                        <p class="h5">Entidad Legal *</p>
                        <select th:field="*{entidadLegal}" class="form-select">
                            <option value="" ></option>
                            <option th:each="entLegal: ${list_entidadeslegales}"
                                    th:value="${entLegal.id}"
                                    th:text="${entLegal.nombre}"
                            />
                        </select>
                        <p class="text-danger" th:if="${#fields.hasErrors('entidadLegal')}" th:errors="*{entidadLegal}" />
                    </div>
                    <div class="col">
                        <p class="h5">BUFU *
                            <i
                                class="bi bi-info-circle ms-1"
                                data-bs-toggle="tooltip"
                                data-bs-title="Las unidades funcionales comprenden las siguientes áreas: EHS, BSA,
                                COMPRAS, COMEX, MARKETING ESTRATÉGICO, COMUNICACIONES, RRHH, FINANZAS, IT,
                                SEGUROS, FACILITIES, INFRAESTRUCTURA, LOGISTICA"
                            ></i></p> <!--TODO: Agregar icono con informacion de las BUFUS-->
                        <select th:field="*{bufu}" class="form-select">
                            <option value="" ></option>
                            <option th:each="bufu: ${list_bufus}"
                                    th:value="${bufu.id}"
                                    th:text="${bufu.nombre}"
                            />
                        </select>
                        <p class="text-danger" th:if="${#fields.hasErrors('bufu')}" th:errors="*{bufu}" />
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p class="h5">IBP *</p>
                        <select th:field="*{ibp}" class="form-select">
                            <option value="" ></option>
                            <option th:each="ibp: ${list_ibps}"
                                    th:value="${ibp.id}"
                                    th:text="${ibp.nombre} + ' ' + ${ibp.apellido}"
                            />
                        </select>
                        <p class="text-danger" th:if="${#fields.hasErrors('ibp')}" th:errors="*{ibp}" /> <!--TODO: Implement contraparte NOT NULL error-->
                    </div>
                    <div class="col">
                        <p class="h5">Contraparte *</p>
                        <input class="rounded mb-3" type="text" name="contraparte" th:field="*{contraparte}" placeholder="Nombre" style="width: 100%; padding: 10px; background: white; border: 2px solid var(--gray-color)"/>
                        <p class="text-danger" th:if="${#fields.hasErrors('contraparte')}" th:errors="*{contraparte}" /> <!--TODO: Implement contraparte NOT NULL error-->
                    </div>
                </div>
                <div class="row" style="height: 150px">
                    <div class="col">
                        <p class="h5">Descripción *</p>
                        <textarea class="rounded mb-3" type="text" name="descripcion" th:field="*{descripcion}" placeholder="Este contrato es para..." style="width: 100%; height: 65%; padding: 10px; background: white; border: 2px solid var(--gray-color); resize: none"/>
                        <p class="text-danger" th:if="${#fields.hasErrors('descripcion')}" th:errors="*{descripcion}" /> <!--TODO: Implement descripcion NOT NULL error-->
                    </div>
                    <div class="col">
                        <p class="h5">Archivos Adjuntos</p>
                        <input class="rounded mb-3" type="file" name="" style="width: 100%; padding: 10px; background: white; border: 2px solid var(--gray-color)"/>
                    </div>
                </div>
                <div>
                    <input type="submit" value="Enviar" class="fw-bold text-light mt-2" style="width: 10%;  padding: 10px; border: 0; background: var(--orange-color); float: right" />
                </div>
            </form>
        </div>
        <script>
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
        </script>
    </body>
</html>